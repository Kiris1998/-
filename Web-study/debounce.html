<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Debounce</title>
</head>
<body>
  <button onclick="deCl()">click</button>
</body>
<script>
  function cl() {
    console.log(123)
  }
  function debounce(fn,ms,isImmediate){ // 触发高频事件后n秒内函数只会执行一次，如果n秒内高频事件再次被触发，则重新计算时间
    let timer = null                    // 每次触发事件时都取消之前的延时调用方法
    return function(){
      let args = arguments
      let that = this
      if (isImmediate&&!timer) {
        fn.apply(that,args)
      }
      if (timer) {
        clearTimeout(timer)
      }
      timer = setTimeout(() => {
          fn.apply(that,args)
      }, ms);
    }
  }
  let deCl = debounce(cl,3000,true)
</script>
</html>